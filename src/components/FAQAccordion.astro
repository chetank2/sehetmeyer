---
interface FAQ {
  question: string;
  answer: string;
}

interface Props {
  faqs: FAQ[];
}

const { faqs } = Astro.props;
---

<div class="space-y-4">
  {faqs.map((faq, index) => (
    <div class="border border-gray-200 rounded-xl overflow-hidden" data-faq-item>
      <button 
        class="w-full px-6 py-4 text-left flex items-center justify-between bg-white hover:bg-gray-50 transition-colors"
        data-faq-button
        aria-expanded="false"
      >
        <span class="font-medium text-black pr-4">{faq.question}</span>
        <svg 
          class="w-5 h-5 text-gray-500 flex-shrink-0 transition-transform duration-200"
          data-faq-icon
          fill="none" 
          stroke="currentColor" 
          viewBox="0 0 24 24"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <div 
        class="hidden px-6 py-4 bg-gray-50 border-t border-gray-200"
        data-faq-content
      >
        <p class="text-gray-600 leading-relaxed">{faq.answer}</p>
      </div>
    </div>
  ))}
</div>

<script>
  document.querySelectorAll('[data-faq-item]').forEach((item) => {
    const button = item.querySelector('[data-faq-button]');
    const content = item.querySelector('[data-faq-content]');
    const icon = item.querySelector('[data-faq-icon]');
    
    button?.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      
      // Close all other items
      document.querySelectorAll('[data-faq-item]').forEach((otherItem) => {
        if (otherItem !== item) {
          otherItem.querySelector('[data-faq-button]')?.setAttribute('aria-expanded', 'false');
          otherItem.querySelector('[data-faq-content]')?.classList.add('hidden');
          otherItem.querySelector('[data-faq-icon]')?.classList.remove('rotate-180');
        }
      });
      
      // Toggle current item
      button.setAttribute('aria-expanded', (!isExpanded).toString());
      content?.classList.toggle('hidden');
      icon?.classList.toggle('rotate-180');
    });
  });
</script>
